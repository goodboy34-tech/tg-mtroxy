# üì¶ –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ **2 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞**:

```
tg-mtproxy/
‚îú‚îÄ‚îÄ control-panel/     # Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ install.sh
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ uninstall.sh
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ
‚îî‚îÄ‚îÄ node-agent/        # –ê–≥–µ–Ω—Ç –Ω–∞ –∫–∞–∂–¥–æ–º –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–µ
    ‚îú‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ scripts/
    ‚îÇ   ‚îú‚îÄ‚îÄ install.sh
    ‚îÇ   ‚îî‚îÄ‚îÄ uninstall.sh
    ‚îî‚îÄ‚îÄ README.md
```

---

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 1: –í—Å–µ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –Ω–µ–±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –û–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
sudo apt update && sudo apt upgrade -y

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/yourusername/tg-mtproxy.git
cd tg-mtproxy
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node Agent

```bash
cd node-agent
sudo bash scripts/install.sh
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏:**
- –ò–º—è –Ω–æ–¥—ã: `Node1`
- –î–æ–º–µ–Ω: –≤–∞—à –¥–æ–º–µ–Ω –∏–ª–∏ IP
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤: `4`

**–ß—Ç–æ –ø–æ–ª—É—á–∏—Ç–µ:**
- API Key - —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!
- –ö–æ–º–∞–Ω–¥—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ Control Panel

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Control Panel

```bash
cd ../control-panel
sudo bash scripts/install.sh
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
1. **Bot Token** - –ø–æ–ª—É—á–∏—Ç–µ —É @BotFather:
   - –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
   - –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è –∏ username
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

2. **Admin ID** - –ø–æ–ª—É—á–∏—Ç–µ —É @userinfobot:
   - –û—Ç–∫—Ä–æ–π—Ç–µ @userinfobot –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID

### –®–∞–≥ 4: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–¥—ã

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:

```
/add_node Node1 your-domain.com https://YOUR_IP:3001 YOUR_API_KEY
```

### –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏

```
# MTProto —Å Fake-TLS
/add_secret 1 dd

# SOCKS5 —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
/add_socks5 1

# –ü–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫–∏
/links 1
```

‚úÖ **–ì–æ—Ç–æ–≤–æ!** –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –≤ Telegram.

---

## üåê –°—Ü–µ–Ω–∞—Ä–∏–π 2: Control Panel –∏ –Ω–æ–¥—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Control Panel Server    ‚Üí   Node 1 Server
(–ª—é–±–æ–π)                     (–ø—É–±–ª–∏—á–Ω—ã–π IP)
  
                        ‚Üí   Node 2 Server
                            (–ø—É–±–ª–∏—á–Ω—ã–π IP)
                            
                        ‚Üí   Node N Server
                            (–ø—É–±–ª–∏—á–Ω—ã–π IP)
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Control Panel

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
git clone https://github.com/yourusername/tg-mtproxy.git
cd tg-mtproxy/control-panel

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
sudo bash scripts/install.sh

# –í–≤–µ—Å—Ç–∏ Bot Token –∏ Admin IDs
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node Agent –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ

**–ù–∞ –∫–∞–∂–¥–æ–º –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å:**

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
git clone https://github.com/yourusername/tg-mtproxy.git
cd tg-mtproxy/node-agent

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
sudo bash scripts/install.sh

# –í–≤–µ—Å—Ç–∏:
# - –ò–º—è: Node1, Node2, Node3...
# - –î–æ–º–µ–Ω: proxy1.example.com, proxy2.example.com...
# - –í–æ—Ä–∫–µ—Ä—ã: 4

# 3. –°–û–•–†–ê–ù–ò–¢–¨ API KEY –∏–∑ –≤—ã–≤–æ–¥–∞!
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–æ–¥

–í Telegram –±–æ—Ç–µ:

```
/add_node Node1 proxy1.example.com https://IP1:3001 API_KEY1
/add_node Node2 proxy2.example.com https://IP2:3001 API_KEY2
/add_node Node3 proxy3.example.com https://IP3:3001 API_KEY3
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ –Ω–∞ –≤—Å–µ—Ö –Ω–æ–¥–∞—Ö

```
# –î–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã:
/add_secret <node_id> dd
/add_socks5 <node_id>
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –Ω–æ–¥–∞–º–∏

```
/create_subscription

# –í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–¥—É
# –£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ MTProto: 3
# –£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ SOCKS5: 3
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç –ø–æ–¥–ø–∏—Å–∫—É —Å –ø—Ä–æ–∫—Å–∏ —Å–æ –≤—Å–µ—Ö –Ω–æ–¥!

---

## üîê –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### API Key

**–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è:** –≤ —Ñ–∞–π–ª–µ `.env` –Ω–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ

**–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å:**
```bash
cat /path/to/node-agent/.env | grep API_KEY
```

**–ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å:**
```bash
# –ù–∞ –Ω–æ–¥–µ
cd /path/to/node-agent
nano .env
# –ò–∑–º–µ–Ω–∏—Ç–µ API_KEY=...
docker-compose restart

# –í Control Panel
/node <node_id>
# –û–±–Ω–æ–≤–∏—Ç–µ API –∫–ª—é—á —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```

### Firewall

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ—Ä—Ç—ã:
- **443** - MTProxy
- **1080** - SOCKS5
- **3001** - Node API

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ API:**
```bash
# –ó–∞–∫—Ä—ã—Ç—å API –¥–ª—è –≤—Å–µ—Ö
ufw delete allow 3001/tcp

# –û—Ç–∫—Ä—ã—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è Control Panel
ufw allow from CONTROL_PANEL_IP to any port 3001 proto tcp
ufw reload
```

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã.

**–î–ª—è production —Å Let's Encrypt:**
```bash
# –ù–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ
sudo apt install certbot
sudo certbot certonly --standalone -d api.yourdomain.com

# –û–±–Ω–æ–≤–∏—Ç–µ docker-compose.yml:
volumes:
  - /etc/letsencrypt/live/api.yourdomain.com:/certs:ro
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### Control Panel

```bash
cd control-panel

# –°—Ç–∞—Ç—É—Å
docker-compose ps

# –õ–æ–≥–∏
docker-compose logs -f

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# ‚úÖ mtproxy-control-panel Up
# ü§ñ MTProxy Management Bot –∑–∞–ø—É—â–µ–Ω!
```

### Node Agent

```bash
cd node-agent

# –°—Ç–∞—Ç—É—Å
docker-compose ps

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 3 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
# ‚úÖ node-agent     Up
# ‚úÖ mtproxy        Up
# ‚úÖ socks5         Up

# –¢–µ—Å—Ç API
curl -k https://localhost:3001/health
# {"status":"ok",...}
```

### –í Telegram

```
/nodes          # –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –Ω–æ–¥—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º ‚úÖ
/health 1       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–æ–¥—ã
/stats 1        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### Control Panel

```bash
cd control-panel
git pull
docker-compose down
docker-compose up -d --build
```

### Node Agent

```bash
cd node-agent
git pull
docker-compose down
docker-compose up -d --build
```

---

## üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ

### –£–¥–∞–ª–∏—Ç—å Control Panel

```bash
cd control-panel
sudo bash scripts/uninstall.sh

# –í—ã–±–µ—Ä–∏—Ç–µ:
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö? (y/n)
# –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ? (y/n)
```

### –£–¥–∞–ª–∏—Ç—å Node Agent

```bash
cd node-agent
sudo bash scripts/uninstall.sh

# –í—ã–±–µ—Ä–∏—Ç–µ:
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é? (y/n)
# –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ? (y/n)
```

–°–∫—Ä–∏–ø—Ç—ã —É–¥–∞–ª–µ–Ω–∏—è:
- ‚úÖ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- ‚úÖ –£–¥–∞–ª—è—é—Ç –æ–±—Ä–∞–∑—ã Docker
- ‚úÖ –û—á–∏—â–∞—é—Ç firewall
- ‚úÖ –£–¥–∞–ª—è—é—Ç —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
cd control-panel
docker-compose logs -f

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ADMIN_IDS
cat .env | grep ADMIN_IDS

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart
```

### –ù–æ–¥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ –Ω–æ–¥–µ
cd node-agent
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall
ufw status

# –¢–µ—Å—Ç API
curl -k https://localhost:3001/health
```

### MTProxy –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ MTProxy
docker-compose logs -f mtproxy

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
netstat -tupln | grep 443

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose up -d --force-recreate mtproxy
```

### SOCKS5 –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ SOCKS5
docker-compose logs -f socks5

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
curl -x socks5://username:password@localhost:1080 https://ifconfig.me

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å
docker-compose up -d --force-recreate socks5
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Control Panel README](./control-panel/README.md) - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–æ—Ç–∞
- [Node Agent README](./node-agent/README.md) - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞
- [–û—Å–Ω–æ–≤–Ω–æ–π README](./README.md) - –æ–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

1. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–∫—Å–∏ –Ω–∞ –≤—Å–µ—Ö –Ω–æ–¥–∞—Ö
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
3. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥–ø–∏—Å–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫—É –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–¥—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!** üéâ
