# üéõÔ∏è MTProxy Control Panel

Telegram –±–æ—Ç –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MTProxy –Ω–æ–¥–∞–º–∏.

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–¥–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–¥
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è –Ω–æ–¥
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –Ω–æ–¥–∞–º

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ MTProto —Å–µ–∫—Ä–µ—Ç–æ–≤ (–æ–±—ã—á–Ω—ã–µ + Fake-TLS)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ SOCKS5 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫ –¥–ª—è Telegram (tg:// –∏ t.me)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ MTProxy –∏ SOCKS5

### –ü–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ–∫—Å–∏
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ Telegram Import
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º –ø–æ–¥–ø–∏—Å–æ–∫

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –Ω–æ–¥ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Ä–∞–∑ –≤ —Å—É—Ç–∫–∏)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Ubuntu/Debian Linux
- Root –¥–æ—Å—Ç—É–ø
- Docker –∏ Docker Compose (—É—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/yourusername/tg-mtproxy.git
cd tg-mtproxy/control-panel

# 2. –ü–æ–ª—É—á–∏—Ç–µ Bot Token
# –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram
# –û—Ç–ø—Ä–∞–≤—å—Ç–µ /newbot –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π token

# 3. –ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à Telegram ID
# –û—Ç–∫—Ä–æ–π—Ç–µ @userinfobot –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ /start
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
sudo bash scripts/install.sh

# –í–≤–µ–¥–∏—Ç–µ Bot Token –∏ Admin IDs –∫–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
# ü§ñ MTProxy Management Bot –∑–∞–ø—É—â–µ–Ω!
# üëë –ê–¥–º–∏–Ω—ã: YOUR_ID
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/help` –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–¥–∞–º–∏
```
/add_node <name> <domain> <api_url> <api_key>
  –ü—Ä–∏–º–µ—Ä: /add_node Node1 proxy.example.com https://1.2.3.4:3001 secret123

/nodes - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –Ω–æ–¥
/node <id> - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–æ–¥–µ
/remove_node <id> - –£–¥–∞–ª–∏—Ç—å –Ω–æ–¥—É
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏
```
/add_secret <node_id> [dd|normal]
  dd - Fake-TLS (–æ–±—Ö–æ–¥ DPI)
  normal - –æ–±—ã—á–Ω—ã–π MTProto

/add_socks5 <node_id>
  –°–æ–∑–¥–∞–Ω–∏–µ SOCKS5 —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

/links <node_id>
  –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤ Telegram
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```
/stats <node_id> - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–æ–¥—ã
/health <node_id> - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
/logs <node_id> [lines] - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
/set_workers <node_id> <count> - –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ (1-16)
```

#### –ü–æ–¥–ø–∏—Å–∫–∏
```
/create_subscription - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–æ–¥–ø–∏—Å–∫—É
/subscriptions - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫
/subscription <id> - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```bash
# Telegram Bot
BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz  # –¢–æ–∫–µ–Ω –æ—Ç @BotFather
ADMIN_IDS=123456789,987654321                    # ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DB_PATH=./data/mtproxy.db                        # –ü—É—Ç—å –∫ SQLite –±–∞–∑–µ

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
HEALTH_CHECK_INTERVAL=5m                         # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
CLEANUP_INTERVAL=24h                             # –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ—á–∏—Å—Ç–∫–∏
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ Telegram ID

–ù–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤:
1. **@userinfobot** - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
2. **@raw_data_bot** - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –í –ª–æ–≥–∞—Ö –±–æ—Ç–∞ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ `/start`

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Control Panel (Telegram Bot)
‚îú‚îÄ‚îÄ –£–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–¥–∞–º–∏ —á–µ—Ä–µ–∑ API
‚îú‚îÄ‚îÄ –•—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ SQLite
‚îú‚îÄ‚îÄ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –∑–¥–æ—Ä–æ–≤—å–µ –Ω–æ–¥
‚îî‚îÄ‚îÄ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏

Node Agent 1 (–°–µ—Ä–≤–µ—Ä 1)
‚îú‚îÄ‚îÄ MTProxy (–ø–æ—Ä—Ç 443)
‚îú‚îÄ‚îÄ SOCKS5 —Å 3proxy (–ø–æ—Ä—Ç 1080)
‚îî‚îÄ‚îÄ Node API (–ø–æ—Ä—Ç 3001)

Node Agent 2 (–°–µ—Ä–≤–µ—Ä 2)
‚îú‚îÄ‚îÄ MTProxy (–ø–æ—Ä—Ç 443)
‚îú‚îÄ‚îÄ SOCKS5 —Å 3proxy (–ø–æ—Ä—Ç 1080)
‚îî‚îÄ‚îÄ Node API (–ø–æ—Ä—Ç 3001)

...–¥–æ 4000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### API Key –¥–ª—è –Ω–æ–¥
–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–æ–¥—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π API –∫–ª—é—á:
```bash
openssl rand -hex 32
```

–≠—Ç–æ—Ç –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç Control Panel.

### –ó–∞—â–∏—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
docker cp mtproxy-control-panel:/app/data/mtproxy.db ./backup-$(date +%Y%m%d).db

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
docker cp ./backup-20260210.db mtproxy-control-panel:/app/data/mtproxy.db
docker-compose restart
```

## üõ†Ô∏è –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
cd control-panel
git pull
docker-compose down
docker-compose up -d --build
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker-compose logs --tail=100

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
docker-compose logs -f | grep ERROR
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫

```bash
# –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ó–∞–ø—É—Å–∫
docker-compose up -d
```

### –û—á–∏—Å—Ç–∫–∞ Docker

```bash
# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–∑—ã
docker image prune -a

# –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker container prune
```

## üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ

```bash
cd control-panel
sudo bash scripts/uninstall.sh
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç:
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (—Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è)
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è

## ‚ùì Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart
```

### –û—à–∏–±–∫–∞ "Not authorized"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ADMIN_IDS –≤ .env
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `docker-compose restart`

### –ù–æ–¥–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API: `curl https://NODE_IP:3001/health`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞ –Ω–æ–¥–µ

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
docker cp ./backup.db mtproxy-control-panel:/app/data/mtproxy.db
docker-compose restart
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node Agent](../node-agent/README.md)
- [Telegram Deeplinks –¥–ª—è –ø—Ä–æ–∫—Å–∏](https://core.telegram.org/api/links#proxy-links)
- [MTProto Proxy Protocol](https://core.telegram.org/mtproto)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs -f`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–æ–¥–∞–º
4. –°–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub

---

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ Telegram
