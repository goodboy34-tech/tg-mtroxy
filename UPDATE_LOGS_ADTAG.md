# –û–±–Ω–æ–≤–ª–µ–Ω–∏—è - –õ–æ–≥–∏, AD_TAG, –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –¥–æ 30MB
–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ç–µ–ø–µ—Ä—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã 30MB –ª–æ–≥–æ–≤:
```yaml
logging:
  driver: json-file
  options:
    max-size: "30m"
    max-file: "1"
```

**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:**
- control-panel (–±–æ—Ç)
- node-agent
- mtproxy
- socks5

### 2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ AD_TAG –¥–ª—è MTProto
–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã–π —Ç–µ–≥ –¥–ª—è MTProto –ø—Ä–æ–∫—Å–∏.

**–í –ë–î:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ `ad_tag` –≤ —Ç–∞–±–ª–∏—Ü—É `nodes`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–í node-agent:**
- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `AD_TAG`
- –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ MTProto –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–∫ `TAG`

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```bash
# –í .env —Ñ–∞–π–ª–µ –Ω–æ–¥—ã
AD_TAG=your_ad_tag_here
```

–ò–ª–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–¥—ã —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —É–∫–∞–∑–∞—Ç—å AD_TAG.

### 3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –±–∞–∑–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –±–æ—Ç–µ.

## üìã –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å:

### Control Panel (–±–æ—Ç):
```bash
cd /opt/mtproxy-control  # –∏–ª–∏ –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
git pull
docker compose build
docker compose down && docker compose up -d
```

### Node (–Ω–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ):
```bash
cd /opt/mtproxy-node  # –∏–ª–∏ –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

# –°–∫–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–¥
curl -L https://github.com/goodboy34-tech/eeee/archive/refs/heads/master.tar.gz -o update.tar.gz
tar -xzf update.tar.gz
cp -r eeee-master/node-agent/* ./node-agent/
rm -rf eeee-master update.tar.gz

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
docker compose -f docker-compose.node.yml build
docker compose -f docker-compose.node.yml down && docker compose -f docker-compose.node.yml up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs -f mtproxy-node-agent
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AD_TAG:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
–í —Ñ–∞–π–ª–µ `.env` –Ω–æ–¥—ã –¥–æ–±–∞–≤–∏—Ç—å:
```bash
AD_TAG=dd1234567890abcdef
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ docker-compose
–í `docker-compose.node.yml`:
```yaml
node-agent:
  environment:
    - AD_TAG=dd1234567890abcdef
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ –±–æ—Ç (—Å–∫–æ—Ä–æ)
–ë—É–¥–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞—Ç—å AD_TAG –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–¥—ã —á–µ—Ä–µ–∑ –±–æ—Ç–∞.

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏ –±—É–¥—É—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤
docker inspect --format='{{.HostConfig.LogConfig}}' mtproxy-control
docker inspect --format='{{.HostConfig.LogConfig}}' mtproxy-node-agent

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# {json-file map[max-file:1 max-size:30m]}
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –±–æ—Ç–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è**
   - –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –°–ª–µ–¥—É—é—â–∏–π –∫–æ–º–º–∏—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç

2. **AD_TAG –ø–æ–∫–∞ –Ω–µ–ª—å–∑—è —É–∫–∞–∑–∞—Ç—å —á–µ—Ä–µ–∑ –±–æ—Ç–∞**
   - –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ .env
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –±–æ—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

## üîú –ß—Ç–æ –¥–∞–ª—å—à–µ:

1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –±–æ—Ç–µ
2. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –º–µ—Ç—Ä–∏–∫ (bandwidth, uptime –∏ —Ç.–¥.)
3. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ AD_TAG –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–¥—ã —á–µ—Ä–µ–∑ –±–æ—Ç–∞
4. –ì—Ä–∞—Ñ–∏–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

Commit: a8de9f3
